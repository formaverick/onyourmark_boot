# On Your Mark

<br>

`ONYOURMARK`ëŠ” **ëŸ¬ë‹ ì „ë¬¸ ì´ì»¤ë¨¸ìŠ¤ í”Œë«í¼ [ì˜¨ìœ ì–´ë§ˆí¬(onyourmark-running.com)](https://onyourmark-running.com)ì„ í´ë¡ **í•˜ì—¬, **í’€ìŠ¤íƒ í”Œë«í¼**ìœ¼ë¡œ í™•ì¥ ë° ì¬êµ¬í˜„í•œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.  
ì‚¬ìš©ì ì¤‘ì‹¬ì˜ ë™ì ì¸ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ë©°, ì•ˆì •ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜ ì„¤ê³„ë¥¼ ëª©í‘œë¡œ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤.

<p align="center"><img width="621" height="748" alt="main" src="https://github.com/user-attachments/assets/f15068b4-3033-4b5e-b18e-a05dd0ff15f6" /></p>

<br>

## ğŸ“‘ ëª©ì°¨ (Table of Contents)

- [ğŸ¯ ê°œë°œ í¬ì¸íŠ¸](#-ê°œë°œ-í¬ì¸íŠ¸)
- [ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ](#ï¸-ê¸°ìˆ -ìŠ¤íƒ)
- [ğŸ›ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#system-architecture)
- [ğŸŒŠ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨](#-ì‹œí€€ìŠ¤-ë‹¤ì´ì–´ê·¸ë¨-sequence-diagrams)
- [ğŸ”— ERD](#-erd)
- [ğŸ“ API ëª…ì„¸](#-api-ëª…ì„¸)
- [âœ¨ ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
- [ğŸ¤¯ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…](#-íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…)
- [ğŸ–¼ï¸ ê²°ê³¼ í™”ë©´](#screenshots)
- [ğŸ“ íšŒê³ ](#-íšŒê³ )

<br>

## ğŸ¯ ê°œë°œ í¬ì¸íŠ¸

- **ì´ì»¤ë¨¸ìŠ¤ í•µì‹¬ ê¸°ëŠ¥ê³¼ ì»¤ë®¤ë‹ˆí‹° ë¡œì§ì˜ í†µí•© ì„¤ê³„**  
  ì›ë³¸ ì‚¬ì´íŠ¸ì˜ ì´ì»¤ë¨¸ìŠ¤ ê¸°ëŠ¥ì„ ê¸°ë°˜ìœ¼ë¡œ, ì‚¬ìš©ìê°€ ì§ì ‘ ì½˜í…ì¸ ë¥¼ ìƒì„±í•˜ê³  ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆëŠ” ì»¤ë®¤ë‹ˆí‹° ë¡œì§ì„ í†µí•© ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.

- **ì‹¤ì œ ì„œë¹„ìŠ¤ ìˆ˜ì¤€ì˜ ì•„í‚¤í…ì²˜ ì„¤ê³„ ë° ì„±ëŠ¥ ìµœì í™”**  
  Reactì™€ Spring Bootë¥¼ ì‚¬ìš©í•˜ì—¬ í’€ìŠ¤íƒ ì•„í‚¤í…ì²˜ë¥¼ ì§ì ‘ ì„¤ê³„Â·êµ¬ì¶•í•˜ê³ , ë³´ì•ˆÂ·ì„±ëŠ¥Â·ìœ ì§€ë³´ìˆ˜ì„±ì„ ê³ ë ¤í•œ êµ¬ì¡°ë¥¼ ì ìš©í–ˆìŠµë‹ˆë‹¤.

- **AI ê¸°ìˆ  ìœµí•©**  
  ì›ë³¸ ì‚¬ì´íŠ¸ì—ëŠ” ì—†ëŠ” ì°¨ë³„í™”ëœ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•˜ê¸° ìœ„í•´, ë¦¬ë·° ê¸°ëŠ¥ì— Python ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê¸°ë°˜ AI ê°ì„± ë¶„ì„ ëª¨ë¸ì„ ì—°ë™í–ˆìŠµë‹ˆë‹¤.

- **ì•ˆì •ì ì¸ íŒŒì¼ ì—…ë¡œë“œ/ì´ë¯¸ì§€ ê´€ë¦¬**  
  ë²”ìš© `FileService`ë¥¼ êµ¬í˜„í•´ íŒŒì¼ ì…ì¶œë ¥ ë¡œì§ì„ ëª¨ë“ˆí™”í•˜ê³ ,  
  UUID ê¸°ë°˜ íŒŒì¼ëª… ìƒì„± + ë‚ ì§œë³„ í´ë” êµ¬ì¡°ë¡œ ì¶©ëŒì„ ë°©ì§€í•˜ë©° ê´€ë¦¬ íš¨ìœ¨ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.

<br>

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

<div>
  <img src="https://img.shields.io/badge/React-61DAFB?style=for-the-badge&logo=React&logoColor=black"/>
  <img src="https://img.shields.io/badge/Spring%20Boot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white"/>
  <img src="https://img.shields.io/badge/Spring%20Security-6DB33F?style=for-the-badge&logo=springsecurity&logoColor=white"/>
  <img src="https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=Python&logoColor=white"/>
  <img src="https://img.shields.io/badge/Flask-000000?style=for-the-badge&logo=Flask&logoColor=white"/>
  <img src="https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=MySQL&logoColor=white"/>
  <img src="https://img.shields.io/badge/JPA(Hibernate)-59666C?style=for-the-badge&logo=Hibernate&logoColor=white"/>
  <img src="https://img.shields.io/badge/Gradle-02303A?style=for-the-badge&logo=Gradle&logoColor=white"/>
</div>

<br>

<div align="center">

| êµ¬ë¶„         | ê¸°ìˆ                                                           |
| ------------ | ------------------------------------------------------------- |
| **Frontend** | React, Axios, React-Router, Redux Toolkit                     |
| **Backend**  | Java 17, Spring Boot, Spring Security, JPA(Hibernate), Gradle |
| **Database** | MySQL                                                         |
| **AI (ML)**  | Python, Flask, Hugging Face Transformers                      |
| **DevOps**   | Git                                                           |

</div>

<br>

<a id="system-architecture"></a>
## ğŸ›ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ (System Architecture)

```mermaid
graph TD
    subgraph "ì‚¬ìš©ì ì˜ì—­"
        User("Client (Web Browser)")
    end

    subgraph "ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸í”„ë¼"
        Frontend("Frontend (React)")
        Backend("Backend (Spring Boot)")
        AIService("AI Microservice (Python/Flask)")
    end

    subgraph "ë°ì´í„° & ìŠ¤í† ë¦¬ì§€"
        DB[("Database (MySQL)")]
        Storage[("File Storage")]
    end

    %% Connections
    User -- "HTTPS" --> Frontend
    Frontend -- "REST API ìš”ì²­" --> Backend

    Backend -- "JPA/JDBC" --> DB
    Backend -- "íŒŒì¼ ì €ì¥/ì¡°íšŒ" --> Storage
    Backend -- "ê°ì„± ë¶„ì„ API ìš”ì²­" --> AIService
```

<br>

## ğŸŒŠ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ (Sequence Diagrams)

### 1. ğŸ–‡ï¸ JWT ì¸ì¦/ì¸ê°€

```mermaid
sequenceDiagram
    participant User as ì‚¬ìš©ì
    participant React as React (Login.jsx + useAuth)
    participant AuthController as Spring AuthController
    participant AuthService as AuthService
    participant JwtUtil as JwtUtil
    participant Filter as JwtAuthFilter
    participant DB as Database

    %% --- ë¡œê·¸ì¸ ---
    User->>React: ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
    React->>AuthController: POST /api/auth/login
    AuthController->>AuthService: login(request)
    AuthService->>DB: ì‚¬ìš©ì ì¡°íšŒ
    DB-->>AuthService: ì‚¬ìš©ì ì •ë³´ ë°˜í™˜

    alt ë¹„ë°€ë²ˆí˜¸ ì¼ì¹˜
        AuthService->>JwtUtil: createToken(user)
        JwtUtil-->>AuthService: JWT Access Token
        AuthService-->>AuthController: token
        AuthController-->>React: { "token": "JWT" }
        React->>React: localStorage.setItem("token")
        React->>React: jwtDecode(token) â†’ role, userid
        React-->>User: "ë¡œê·¸ì¸ ì„±ê³µ" ì•Œë¦¼ + í˜ì´ì§€ ì´ë™
    else ë¶ˆì¼ì¹˜
        AuthController-->>React: 401 Unauthorized
        React-->>User: "ë¡œê·¸ì¸ ì‹¤íŒ¨" ì•Œë¦¼
    end

    %% --- ë³´í˜¸ëœ API ì ‘ê·¼ ---
    User->>React: ë³´í˜¸ëœ í˜ì´ì§€ ì ‘ê·¼
    React->>AuthController: API ìš”ì²­ (Authorization: Bearer JWT)
    AuthController->>Filter: JwtAuthFilter.doFilterInternal()
    Filter->>JwtUtil: validateToken(token)
    JwtUtil-->>Filter: userid, role
    Filter->>Filter: SecurityContextì— ROLE ì €ì¥
    AuthController->>DB: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰
    DB-->>AuthController: ê²°ê³¼ ë°˜í™˜
    AuthController-->>React: ë°ì´í„° ì‘ë‹µ
    React-->>User: ROLE ê¸°ë°˜ UI ë Œë”ë§
```

### 2. ğŸ–‡ï¸ ë¦¬ë·° ì‘ì„± & ë¶„ì„

```mermaid
sequenceDiagram
    participant User as ì‚¬ìš©ì
    participant React as React (ReviewForm.jsx)
    participant ReviewController as Spring ReviewController
    participant ReviewService as ReviewService
    participant Flask as Flask AI Service
    participant DB as Database

    %% --- ë¦¬ë·° ì‘ì„± ---
    User->>React: ë¦¬ë·° ì‘ì„± + ì´ë¯¸ì§€ ì²¨ë¶€
    React->>ReviewController: POST /api/review (content + imgs, JWT)
    ReviewController->>ReviewService: create(content, imgs, memberId)

    %% --- AI ê°ì„± ë¶„ì„ ---
    ReviewService->>Flask: POST /analyze { content }
    Flask-->>ReviewService: { sentiment: 1~5 }

    %% --- DB ì €ì¥ ---
    ReviewService->>DB: INSERT review (content, sentiment, member_id)
    ReviewService->>DB: INSERT review_img (íŒŒì¼ ì €ì¥ í›„ URL)
    DB-->>ReviewService: review_id ë°˜í™˜

    %% --- ì‘ë‹µ ---
    ReviewService-->>ReviewController: ReviewResponse DTO
    ReviewController-->>React: { id, content, sentiment, relatedReviews }
    React-->>User: "ë¦¬ë·° ë“±ë¡ ì™„ë£Œ" + ìƒì„¸í˜ì´ì§€ ì´ë™

    %% --- ë¦¬ë·° ìƒì„¸ ì¡°íšŒ ---
    User->>React: ë¦¬ë·° ìƒì„¸ í˜ì´ì§€ ì ‘ê·¼
    React->>ReviewController: GET /api/review/{id}
    ReviewController->>ReviewService: getOne(id)
    ReviewService->>DB: SELECT review + ìœ ì‚¬ ë¦¬ë·° ì¡°íšŒ
    DB-->>ReviewService: ë°ì´í„° ë°˜í™˜
    ReviewService-->>React: ReviewResponse
    React-->>User: ë¦¬ë·° ìƒì„¸ + ìœ ì‚¬ ë¦¬ë·° ì¶”ì²œ í‘œì‹œ
```

### 3. ğŸ–‡ï¸ Q&A ê²Œì‹œíŒ

```mermaid
sequenceDiagram
    participant User as ì‚¬ìš©ì (íšŒì›/ë¹„íšŒì›)
    participant React as React (Board.jsx)
    participant BoardController as Spring BoardController
    participant BoardService as BoardService
    participant BoardRepostController as BoardRepostController
    participant BoardRepostService as BoardRepostService
    participant DB as Database

    %% --- ê²Œì‹œê¸€ ì‘ì„± ---
    User->>React: ë¬¸ì˜ ì‘ì„± (íšŒì› or ë¹„íšŒì›)
    React->>BoardController: POST /api/board/new
    BoardController->>BoardService: create(request, userid)
    BoardService->>DB: INSERT board_post
    DB-->>BoardService: board_id
    BoardService-->>BoardController: id
    BoardController-->>React: ê²Œì‹œê¸€ ë“±ë¡ ì™„ë£Œ

    %% --- ê²Œì‹œê¸€ ì¡°íšŒ ---
    User->>React: ê²Œì‹œê¸€ ìƒì„¸ í˜ì´ì§€ ì ‘ê·¼
    React->>BoardController: GET /api/board/{id}
    BoardController->>BoardService: read(id, password, isAdmin)
    alt ë¹„íšŒì› + ë¹„ë°€ê¸€
        BoardService->>BoardService: ë¹„ë°€ë²ˆí˜¸ ê²€ì¦
        BoardService-->>BoardController: Forbidden(403)
    else ê´€ë¦¬ì
        BoardService-->>BoardController: ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ ìƒëµ
    end
    BoardController-->>React: ê²Œì‹œê¸€ ìƒì„¸ + ë‹µë³€ ì—¬ë¶€(hasRepost)

    %% --- ê´€ë¦¬ì ë‹µë³€ ---
    User->>React: (ê´€ë¦¬ì) ë‹µë³€ ì‘ì„±
    React->>BoardRepostController: POST /api/reposts/{boardId} (ADMIN JWT)
    BoardRepostController->>BoardRepostService: create(boardId, request, adminId)
    BoardRepostService->>DB: INSERT board_repost
    DB-->>BoardRepostService: repost_id
    BoardRepostService-->>BoardRepostController: id
    BoardRepostController-->>React: ë‹µë³€ ë“±ë¡ ì™„ë£Œ
```

<br>

## ğŸ”— ERD

ğŸ“Š ì „ì²´ í…Œì´ë¸” êµ¬ì¡°ëŠ” [Google Sheets] https://docs.google.com/spreadsheets/d/1bTXc3KSDw5LSB-16UCVfFV8iHM6LN_cmsZGpj8ih0rE/edit?usp=sharing ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<p align="center"><img width="600" alt="ERD diagram" src="https://github.com/user-attachments/assets/b4e1ec53-3b9a-43b2-819f-d74a4e2ed599" /></p>

<br>

## ğŸ“ API ëª…ì„¸

ğŸ‘‰ ì „ì²´ API ë¬¸ì„œëŠ” [Postman Docs](https://documenter.getpostman.com/view/48241033/2sB3QFPrEj) ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<div align="center">

| êµ¬ë¶„       | ë©”ì„œë“œ | ì—”ë“œí¬ì¸íŠ¸          | ì„¤ëª…                      |
| ---------- | ------ | ------------------- | ------------------------- |
| Auth       | POST   | /api/auth/login     | ë¡œê·¸ì¸ (JWT ë°œê¸‰)         |
| Auth       | POST   | /api/auth/signup    | íšŒì›ê°€ì…                  |
| Members    | GET    | /api/members/member | ë‚´ ì •ë³´ ì¡°íšŒ              |
| Board(Q&A) | POST   | /api/board/new      | ê²Œì‹œê¸€ ì‘ì„±               |
| Board(Q&A) | DELETE | /api/board/{id}     | ê²Œì‹œê¸€ ì‚­ì œ               |
| Reposts    | POST   | /api/reposts/{id}   | ë‹µë³€ ì‘ì„± (ê´€ë¦¬ì ì „ìš©)   |
| Notices    | GET    | /api/notices        | ê³µì§€ì‚¬í•­ ëª©ë¡             |
| Notices    | DELETE | /api/notices/{id}   | ê³µì§€ì‚¬í•­ ì‚­ì œ (ê´€ë¦¬ì)    |
| Review     | POST   | /api/review         | ë¦¬ë·° ì‘ì„± (ì´ë¯¸ì§€ ì—…ë¡œë“œ) |

</div>

<br>

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### 1. ğŸ”‘ JWT ê¸°ë°˜ ì¸ì¦ ë° ì¸ê°€

- **Stateless ì¸ì¦ êµ¬ì¡°**
  - Spring Security + JWTë¥¼ í™œìš©í•´ **ì„¸ì…˜ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì¸ì¦/ì¸ê°€ ì‹œìŠ¤í…œ**ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
  - Access Tokenì—ëŠ” `userid`, `username`, `memberId`, `role` ì •ë³´ë¥¼ ë‹´ì•„ ë°œê¸‰í•˜ê³ , ë§Œë£Œ ì‹œê°„ì€ **1ì‹œê°„**ìœ¼ë¡œ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.

- **ë°±ì—”ë“œ ì¸ì¦ ì²˜ë¦¬**
  - `AuthController` â†’ ë¡œê·¸ì¸ ìš”ì²­ ì²˜ë¦¬ ë° JWT ë°œê¸‰
  - `AuthService` â†’ ì‚¬ìš©ì ê²€ì¦ & í† í° ìƒì„± ë¡œì§
  - `JwtUtil` â†’ JWT ìƒì„±/ê²€ì¦ ë° Payload ì¶”ì¶œ
  - `JwtAuthFilter` â†’ ë§¤ ìš”ì²­ë§ˆë‹¤ í† í° ê²€ì¦ í›„ `SecurityContext`ì— ì¸ì¦ ì •ë³´ ì €ì¥

- **í”„ë¡ íŠ¸ì—”ë“œ ì¸ì¦ ì²˜ë¦¬**
  - React `Login.jsx`ì—ì„œ ë¡œê·¸ì¸ ìš”ì²­ â†’ ì‘ë‹µ í† í°ì„ `localStorage`ì— ì €ì¥
  - `jwtDecode`ë¡œ payload íŒŒì‹± í›„ `useAuth` í›…ì—ì„œ ìƒíƒœ ê´€ë¦¬
  - ROLEì— ë”°ë¼ ë²„íŠ¼(ì˜ˆ: ê´€ë¦¬ì ì „ìš©)ì´ë‚˜ í˜ì´ì§€ ì ‘ê·¼ ì œì–´

<br>

```java
// JwtAuthFilter.java
@Override
    protected void doFilterInternal(HttpServletRequest request,
                                    HttpServletResponse response,
                                    FilterChain filterChain) throws ServletException, IOException {
        String token = jwtUtil.resolveToken(request);

        if(token != null && jwtUtil.validateToken(token)){
            String userid = jwtUtil.getUseridFromToken(token);
            String role = jwtUtil.getRoleFromToken(token);

            List<GrantedAuthority> authorities
                    = (role != null && !role.isBlank())
                    ? List.of(new SimpleGrantedAuthority("ROLE_" + role))
                    : List.of();

            System.out.println("Authorities set: " + authorities);

            UsernamePasswordAuthenticationToken authentication =
                    new UsernamePasswordAuthenticationToken(userid, null, authorities);

            authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));

            SecurityContextHolder.getContext().setAuthentication(authentication);
        }

        filterChain.doFilter(request, response);
    }
```

```java
// JwtUtil.java (ë°œì·Œ)
public String createToken(User user){
    Date now = new Date();
    Date expiryDate = new Date(now.getTime() + EXPIRATION_TIME);

    return Jwts.builder()
            .setSubject(user.getUserid())
            .claim("memberId", user.getId())
            .claim("username", user.getUsername())
            .claim("role", user.getRole().name())
            .setIssuedAt(now)
            .setExpiration(expiryDate)
            .signWith(key, SignatureAlgorithm.HS256)
            .compact();
}
```

```java
// useAuth.js (ë°œì·Œ)
const parseToken = () => {
  const token = localStorage.getItem("token");
  if (!token) return { token: null, role: null };

  const decoded = jwtDecode(token);
  if (decoded.exp * 1000 <= Date.now()) {
    localStorage.removeItem("token");
    return { token: null, role: null };
  }
  return { token, role: decoded.role };
};
```

<br>

---

### 2. ğŸ’¡ AI ê°ì„± ë¶„ì„ ê¸°ë°˜ ë¦¬ë·° (Hugging Face ì—°ë™)

- **ë¦¬ë·° ì‘ì„± & ì´ë¯¸ì§€ ì—…ë¡œë“œ**
  - React `ReviewForm`ì—ì„œ ì‘ì„±ìê°€ ë¦¬ë·°ë¥¼ ì…ë ¥í•˜ê³  ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ë©´ `multipart/form-data`ë¡œ Spring ì„œë²„ì— ì „ì†¡í•©ë‹ˆë‹¤.
  - ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ìëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ìœ¼ë©°, ì‘ì„±ì ë³¸ì¸ë§Œ ì‚­ì œ ë²„íŠ¼ì´ ë…¸ì¶œë©ë‹ˆë‹¤.

- **AI ê°ì„± ë¶„ì„ (Flask)**
  - Spring `ReviewService`ì—ì„œ Flask ì„œë²„ì˜ `/analyze` APIë¥¼ í˜¸ì¶œí•´ ë¦¬ë·° í…ìŠ¤íŠ¸ì˜ ê°ì„± ì ìˆ˜(sentiment)ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤.
  - Flask ì„œë²„ëŠ” Hugging Face ëª¨ë¸ì„ ì‚¬ìš©í•´ ê°ì„± ë¶„ì„ì„ ìˆ˜í–‰í•˜ê³ , ê²°ê³¼ë¥¼ JSONìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.

- **ìœ ì‚¬ ë¦¬ë·° ì¶”ì²œ**
  - DB Native Query(`ReviewRepository.findSimilarReviews`)ë¡œ sentiment ê°’ì´ ìœ ì‚¬í•œ ë¦¬ë·° 5ê°œë¥¼ ì¡°íšŒí•˜ì—¬ í•¨ê»˜ ì‘ë‹µí•©ë‹ˆë‹¤.
  - í”„ë¡ íŠ¸ì—”ë“œì—ì„œëŠ” `ReviewDetail` í™”ë©´ í•˜ë‹¨ì— â€œë‹¤ë¥¸ ë¦¬ë·°ë„ êµ¬ê²½í•´ë³´ì„¸ìš”!â€ ì„¹ì…˜ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.


```java
// ReviewService.java
private int analyzeSentiment(String content) {
    try {
        Map<String, String> request = Map.of("content", content);
        // Beanìœ¼ë¡œ ë“±ë¡ëœ RestTemplateê³¼ @Valueë¡œ ì£¼ì…ë°›ì€ URL ì‚¬ìš©
        Map<String, Object> response = restTemplate.postForObject(flaskApiUrl, request, Map.class);

        if (response == null || !Objects.equals(response.get("status"), "success")) {
            throw new RuntimeException("Flask ê°ì„±ë¶„ì„ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
        }
        return (int) response.get("sentiment");
    } catch (Exception e) {
        throw new RuntimeException("ê°ì„± ë¶„ì„ ì„œë¹„ìŠ¤ í˜¸ì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
    }
}
```

```java
# Flask ì„œë²„ (app.py)
@app.route('/analyze', methods=['POST'])
def api_analyze():
    data = request.get_json()
    content = data.get("content", "").strip()
    sentiment = analyze_sentiment(content)
    return jsonify({"status": "success", "sentiment": sentiment})
```

```java
// ReviewForm.jsx (React)
const handleSubmit = async (e) => {
  e.preventDefault();
  const formData = new FormData();
  formData.append("content", content);
  imgs.forEach(img => formData.append("imgs", img));

  const res = await api.post("/api/review", formData, {
    headers: { "Content-Type": "multipart/form-data", Authorization: `Bearer ${auth.token}` },
  });

  alert("ë¦¬ë·°ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
  navigate(`/review/${res.data.id}`);
};
```

<br>

---

### 3. ğŸ“ ë³µí•© ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” Q&A ê²Œì‹œíŒ (íšŒì›/ë¹„íšŒì› ì‘ì„± + ê´€ë¦¬ì ë‹µë³€)

- **íšŒì›/ë¹„íšŒì› ì‘ì„± ì§€ì›**
  - íšŒì›: ë¡œê·¸ì¸ í›„ ë°”ë¡œ ì‘ì„± ê°€ëŠ¥
  - ë¹„íšŒì›: ì‘ì„±ìëª… + ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í•„ìˆ˜
  - ì‘ì„± ì‹œ **ë¹„ê³µê°œ ì„¤ì •** ê°€ëŠ¥ â†’ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥í•´ì•¼ ì¡°íšŒ ê°€ëŠ¥

- **ê¶Œí•œ ê¸°ë°˜ ì ‘ê·¼ ì œì–´**
  - ë³¸ì¸(íšŒì›/ë¹„íšŒì›) ë˜ëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥
  - ë¹„ê³µê°œ ê¸€ì€ ì‘ì„±ì ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ í•„ìš”
  - ê´€ë¦¬ìëŠ” ROLE í™•ì¸ í›„ ëª¨ë“  ê¸€ ì ‘ê·¼ ê°€ëŠ¥

- **ê´€ë¦¬ì ë‹µë³€**
  - `@PreAuthorize("hasRole('ADMIN')")` ê¸°ë°˜ìœ¼ë¡œ ê´€ë¦¬ìë§Œ ë‹µë³€ CRUD ê°€ëŠ¥
  - ê²Œì‹œê¸€ë‹¹ ë‹µë³€ì€ 1ê°œë§Œ ë“±ë¡ ê°€ëŠ¥ (ì¤‘ë³µ ë°©ì§€)

```java
// BoardService.java - ê²Œì‹œê¸€ ì‘ì„±
  public Long create(BoardPostCreateRequest request, String userid){
        BoardPost.BoardPostBuilder b = BoardPost.builder()
                .title(request.getTitle())
                .content(request.getContent())
                .postPassword(passwordEncoder.encode(request.getPostPassword()))
                .isSecret(request.isSecret());

        if(userid != null){
            User u = userRepository.findByUserid(userid)
                    .orElseThrow(() -> new RuntimeException("ì‚¬ìš©ìê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."));
            b.writerType(WriterType.MEMBER).member(u).writerName(null);
        }else {
            if(request.getWriterName() == null || request.getWriterName().isBlank()){
                throw new ResponseStatusException(HttpStatus.BAD_REQUEST, "ì‘ì„±ìëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            }

            b.writerType(WriterType.GUEST).writerName(request.getWriterName()).member(null);
        }

        return boardRepository.save(b.build()).getId();
    }
```

```java
// BoardRepostController.java - ê´€ë¦¬ì ë‹µë³€ ì‘ì„±
@PreAuthorize("hasRole('ADMIN')")
@PostMapping("/{boardId}")
public ResponseEntity<Long> create(
  @PathVariable Long boardId,
  @RequestBody BoardRepostCreateRequest request,
  Authentication authentication
){
        String userid = authentication.getName();
        Long id = repostService.create(boardId, request, userid);

        return ResponseEntity.ok(id);
    }
```

<details>
  <summary><b>ğŸ’» í”„ë¡ íŠ¸ì—”ë“œ (React Q&A ê²Œì‹œíŒ) (í´ë¦­)</b></summary>
  
  Q&A ê²Œì‹œíŒì€ React ì»´í¬ë„ŒíŠ¸ ë‹¨ìœ„(BoardPage.jsx)ë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, **íšŒì›/ë¹„íšŒì› ì‘ì„±, ë¹„ë°€ë²ˆí˜¸ ê²€ì¦, ê´€ë¦¬ì ë‹µë³€ ì‘ì„±**ê¹Œì§€ ëª¨ë‘ ì§€ì›í•©ë‹ˆë‹¤.

  #### 1) ğŸ“‹ ê²Œì‹œíŒ ëª©ë¡ (BoardMain.jsx)

  - ì„œë²„ì—ì„œ ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  í˜ì´ì§€ë„¤ì´ì…˜ì„ ì ìš©í–ˆìŠµë‹ˆë‹¤.
  - **ë¹„ë°€ê¸€ ğŸ”’ ì•„ì´ì½˜ í‘œì‹œ**, **ê´€ë¦¬ì ë‹µë³€ ìƒíƒœ(ëŒ€ê¸°/ì™„ë£Œ)** í‘œì‹œ ê¸°ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤.

  ```jsx
  const fetchBoardList = async (page = 0) => {
    const response = await api.get(`/api/board?page=${page}&size=20&sort=createdAt,desc`);
    setBoardList(response.data.content || []);
  };
  ```

#### 2) âœï¸ ê²Œì‹œê¸€ ì‘ì„± / ìˆ˜ì • (BoardWriteUser.jsx)
- íšŒì›: ë¡œê·¸ì¸ ìƒíƒœì—ì„œ ë°”ë¡œ ì‘ì„± ê°€ëŠ¥
- ë¹„íšŒì›: ì‘ì„±ìëª… + ë¹„ë°€ë²ˆí˜¸ í•„ìˆ˜ ì…ë ¥
- ìˆ˜ì • ëª¨ë“œ: ê¸°ì¡´ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ í›„ ìˆ˜ì • ê°€ëŠ¥

```java
const createPost = async () => {
    try {
      const body = {
        title: formData.title,
        content: formData.content,
        writerName: formData.writerName, // í•­ìƒ ì „ì†¡
        postPassword: createPassword,
        isSecret: formData.isSecret,
      };
      const res = await api.post("/api/board/new", body);
      return res.data;
    } catch (err) {
      throw new Error(
        err.response?.data?.message ||
          err.message ||
          "ê²Œì‹œê¸€ ì‘ì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."
      );
    }
  };
```

#### 3) ğŸ”‘ ë¹„ë°€ê¸€ ì ‘ê·¼ (BoardPassword.jsx)
- ë¹„íšŒì›ì´ ì‘ì„±í•œ ë¹„ë°€ê¸€ ì ‘ê·¼ ì‹œ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ì°½ì„ ë…¸ì¶œ
- ì…ë ¥ê°’ ê²€ì¦ í›„, ì„œë²„ë¡œ API ìš”ì²­ â†’ ì„±ê³µ ì‹œ ìƒì„¸ì¡°íšŒ ê°€ëŠ¥

```java
const handlePasswordSubmit = async (e) => {
    e.preventDefault();
    if (!password.trim()) return setError("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
    try {
      setLoading(true);
      setError("");
      const res = await api.get(`/api/board/${post.id}`, {
        params: { password },
      });
      onPasswordSuccess({ ...res.data, password }); // ìƒì„¸/ìˆ˜ì • ì¬í˜¸ì¶œì— ì‚¬ìš©
    } catch (err) {
      if (err.response?.status === 403)
        setError("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
      else if (err.response?.status === 404)
        setError("ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
      else
        setError(
          err.response?.data?.message || err.message || "ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."
        );
    } finally {
      setLoading(false);
    }
  };
```

#### 4) ğŸ“– ê²Œì‹œê¸€ ìƒì„¸ (BoardDetail.jsx)
- ì œëª©, ì‘ì„±ì(ë§ˆìŠ¤í‚¹), ì‘ì„±ì¼, ì¡°íšŒìˆ˜ ë“± ë©”íƒ€ ì •ë³´ í‘œì‹œ
- ë³¸ì¸(ë˜ëŠ” ê´€ë¦¬ì)ë§Œ ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ ë…¸ì¶œ
- ê´€ë¦¬ì ë‹µë³€ ì˜ì—­ ì—°ë™

```java
// ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ
  const fetchPostDetail = async (id, password = null) => {
    try {
      setLoading(true);
      const params = password ? { password } : {};
      const response = await api.get(`/api/board/${id}`, { params });
      const data = response.data;
      setPostData(data);
      setError(null);
    } catch (err) {
      if (err.response?.status === 403) {
        setError("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
      } else if (err.response?.status === 404) {
        setError("ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
      } else {
        setError(
          err.response?.data?.message ||
            err.message ||
            "ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."
        );
      }
    } finally {
      setLoading(false);
    }
  };
```

```java
// ë‹µë³€ ì¡°íšŒ
  const fetchRepost = async () => {
    try {
      const res = await api.get(`/api/reposts/${post.id}`);
      setRepostData(res.data);
    } catch (err) {
      setRepostData(null);
    }
  };
```

#### 5) ğŸ›  ê´€ë¦¬ì ë‹µë³€ ì‘ì„± / ìˆ˜ì • (BoardRepostWrite.jsx)
- ADMIN ê¶Œí•œ ê³„ì •ë§Œ ì ‘ê·¼ ê°€ëŠ¥
- ë‹µë³€ ì‘ì„±/ìˆ˜ì • API ì—°ë™

```java
  const handleSubmit = async () => {
    if (!content.trim()) {
      alert("ë‹µë³€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.");
      return;
    }
    try {
      setLoading(true);
      if (mode === "create") {
        await api.post(`/api/reposts/${post.id}`, { content });
        alert("ë‹µë³€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
      } else {
        await api.put(`/api/reposts/${post.id}`, { content });
        alert("ë‹µë³€ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
      }
      onSuccess();
    } catch (err) {
      alert(err.response?.data?.message || err.message || "ì˜¤ë¥˜ ë°œìƒ");
    } finally {
      setLoading(false);
    }
  };
```

#### 6) ğŸ“Œ í˜ì´ì§€ ì „ì²´ íë¦„ (BoardPage.jsx)
list â†’ detail â†’ write/edit â†’ repostWrite/edit â†’ password ëª¨ë“œë¡œ ì „í™˜, ê° ìƒíƒœì— ë”°ë¼ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ì œì–´

```java
{mode === "list" && <BoardMain onPostSelect={handlePostSelect} />}
{mode === "password" && <BoardPassword post={selectedPost} />}
{mode === "detail" && <BoardDetail post={selectedPost} />}
{mode === "write" && <BoardWriteUser mode="write" />}
{mode === "edit" && <BoardWriteUser mode="edit" post={selectedPost} />}
```
</details>

<br>

---

### 4. ì•ˆì •ì ì¸ íŒŒì¼ ì—…ë¡œë“œ

- íŒŒì¼ ì…ì¶œë ¥ ë¡œì§ì„ `FileService`ë¼ëŠ” ë²”ìš© ì„œë¹„ìŠ¤ë¡œ ë¶„ë¦¬í•˜ì—¬ ì—­í• ê³¼ ì±…ì„ì„ ëª…í™•íˆ í•˜ê³ (SRP), ì½”ë“œì˜ ì¬ì‚¬ìš©ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.
- `UUID`ë¥¼ ì´ìš©í•´ íŒŒì¼ëª…ì„ ìƒì„±í•˜ì—¬ ì´ë¦„ ì¶©ëŒì„ ë°©ì§€í•˜ê³ , ë‚ ì§œ ê¸°ë°˜ìœ¼ë¡œ í´ë”ë¥¼ ìƒì„±í•˜ì—¬ íŒŒì¼ì„ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.

```java
// ReviewImgService.java - ë„ë©”ì¸ íŠ¹í™” ì„œë¹„ìŠ¤
public ReviewImg save(Review review, MultipartFile file) throws Exception {
    String oriImgName = file.getOriginalFilename();
    String today = LocalDate.now().format(DateTimeFormatter.ofPattern("yyyy/MM/dd"));
    String savePath = reviewImgLocation + "/" + today;

    // ë²”ìš© FileServiceì— íŒŒì¼ ì €ì¥ì„ ìœ„ì„
    String saved = fileService.uploadFile(savePath, oriImgName, file.getBytes());

    ReviewImg img = ReviewImg.builder() ... .build();
    return reviewImgRepository.save(img);
}

// FileService.java - ë²”ìš© íŒŒì¼ ì €ì¥ ì„œë¹„ìŠ¤
public String uploadFile(String uploadPath, String originalFileName, byte[] fileData) throws Exception {
    Path dir = Paths.get(uploadPath).toAbsolutePath().normalize();
    Files.createDirectories(dir);
    String saved = UUID.randomUUID() + "." + getExtension(originalFileName);
    Path target = dir.resolve(saved).normalize();
    Files.copy(new java.io.ByteArrayInputStream(fileData), target, StandardCopyOption.REPLACE_EXISTING);
    return saved;
}
```

<br>


## ğŸ¤¯ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### 1. ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì‹œ N+1 ë¬¸ì œ ë°œìƒ

#### ğŸ‘‰ JPA Fetch ì „ëµ ìµœì í™”ë¡œ ì¿¼ë¦¬ ì„±ëŠ¥ ê°œì„ 

- **ë¬¸ì œ ìƒí™©**

  - ê²Œì‹œê¸€(`BoardPost`) ëª©ë¡ ì¡°íšŒ ì‹œ, ì—°ê´€ëœ ì‘ì„±ì(`User`) ì •ë³´ë¥¼ ì§€ì—° ë¡œë”©(LAZY)ìœ¼ë¡œ ê°€ì ¸ì˜¤ë©´ì„œ ë¶ˆí•„ìš”í•œ Nê°œì˜ ì¶”ê°€ ì¿¼ë¦¬ê°€ ë°œìƒí•˜ëŠ” N+1 ë¬¸ì œë¥¼ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.
  - APIë¥¼ í˜¸ì¶œí•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ê²Œì‹œê¸€ ëª©ë¡ì„ ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬ 1ê°œ ì‹¤í–‰ í›„, ê° ê²Œì‹œê¸€ì˜ ì‘ì„±ì ì •ë³´ë¥¼ ì¡°íšŒí•˜ëŠ” Nê°œì˜ ì¿¼ë¦¬ê°€ ì¶”ê°€ë¡œ ë°œìƒí•˜ëŠ” ê²ƒì„ ë¡œê·¸ë¡œ í™•ì¸í–ˆìŠµë‹ˆë‹¤.

<details>
<summary><b>AS-IS: ì‹¤í–‰ ì¿¼ë¦¬ ë¡œê·¸ í™•ì¸í•˜ê¸° (í´ë¦­)</b></summary>

```sql
-- 1. ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ (ì¿¼ë¦¬ 1ë²ˆ)
Hibernate: 
    select ... from board_post bp1_0 order by bp1_0.created_at desc limit ?, ?

-- 2. ê° ê²Œì‹œê¸€ì˜ ì‘ì„±ì(User) ì •ë³´ë¥¼ ê°œë³„ì ìœ¼ë¡œ ì¡°íšŒ (ì¿¼ë¦¬ Në²ˆ)
Hibernate: 
    select ... from users u1_0 where u1_0.member_id=?
Hibernate: 
    select ... from users u1_0 where u1_0.member_id=?
-- (ê²Œì‹œê¸€ ìˆ˜ë§Œí¼ ë°˜ë³µ)
```

</details>

- **í•´ê²° ê³¼ì •**

  - JPQL `JOIN FETCH`ë¥¼ ì ìš©í•˜ì—¬ `BoardPost`ì™€ ì—°ê´€ëœ `User` ì—”í‹°í‹°ë¥¼ **í•œ ë²ˆì˜ `JOIN` ì¿¼ë¦¬**ë¡œ í•¨ê»˜ ì¡°íšŒí•˜ë„ë¡ ë¦¬íŒ©í† ë§í–ˆìŠµë‹ˆë‹¤.
  - í˜ì´ì§• ì²˜ë¦¬ë¥¼ ìœ„í•´ `countQuery`ë¥¼ ë³„ë„ë¡œ ë¶„ë¦¬í•˜ì—¬, ë°ì´í„° ì¡°íšŒì™€ ì „ì²´ ê°œìˆ˜ ê³„ì‚° ë¡œì§ì„ ëª¨ë‘ ìµœì í™”í–ˆìŠµë‹ˆë‹¤.

- **ê²°ê³¼**

  - **(N+1)ë²ˆ ì‹¤í–‰ë˜ë˜ ì¿¼ë¦¬ë¥¼ ë‹¨ 2ë²ˆ(ë°ì´í„° ì¡°íšŒ 1ë²ˆ, Count 1ë²ˆ)ìœ¼ë¡œ ìµœì í™”**í•˜ì—¬ DB ë¶€í•˜ë¥¼ í¬ê²Œ ê°ì†Œì‹œì¼°ìŠµë‹ˆë‹¤.
  - API í‰ê·  ì‘ë‹µ ì†ë„ê°€ **ì•½ 52% ê°œì„  (250ms â†’ 120ms)**.
  - ORM Fetch ì „ëµ ë° ì„±ëŠ¥ ë³‘ëª© êµ¬ê°„ ìµœì í™” ì—­ëŸ‰ì„ í™•ë³´í–ˆìŠµë‹ˆë‹¤.

<details>
<summary><b>TO-BE: ìµœì í™”ëœ ì¿¼ë¦¬ ë¡œê·¸ í™•ì¸í•˜ê¸° (í´ë¦­)</b></summary>

```sql
-- 1. ê²Œì‹œê¸€ê³¼ ì‘ì„±ì ì •ë³´ë¥¼ JOINí•˜ì—¬ í•œ ë²ˆì— ì¡°íšŒ (ì¿¼ë¦¬ 1ë²ˆ)
Hibernate: 
    select ..., m1_0.member_id, m1_0.email, ... 
    from board_post bp1_0 
    join users m1_0 on m1_0.member_id=bp1_0.member_id 
    order by bp1_0.created_at desc limit ?

-- 2. í˜ì´ì§•ì„ ìœ„í•œ ì „ì²´ ê°œìˆ˜ ì¡°íšŒ (ì¿¼ë¦¬ 1ë²ˆ)
Hibernate: 
    select count(bp1_0.board_id) from board_post bp1_0
```

</details>

```java
// BoardRepository.java
@Query(value = "SELECT b FROM BoardPost b JOIN FETCH b.member",
       countQuery = "SELECT count(b) FROM BoardPost b")
Page<BoardPost> findAllWithUser(Pageable pageable);
```

---

### 2. ìœ ì‚¬ ë¦¬ë·° ì¶”ì²œ ê¸°ëŠ¥ì˜ ë¹„íš¨ìœ¨ì ì¸ ì•„í‚¤í…ì²˜

#### ğŸ‘‰ Native Query ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„° ê³„ì¸µì—ì„œ ì§ì ‘ ì²˜ë¦¬

- **ë¬¸ì œ ìƒí™©**

  - ë¦¬ë·° ì¶”ì²œ ë¡œì§ì´ AI ì„œë²„(Flask)ì— ê³¼ë„í•˜ê²Œ ì˜ì¡´.
  - ë¶ˆí•„ìš”í•œ API í˜¸ì¶œ + ëŒ€ëŸ‰ ë°ì´í„° ì „ì†¡ìœ¼ë¡œ ë„¤íŠ¸ì›Œí¬ ì§€ì—° ë° ë©”ëª¨ë¦¬ ë¶€í•˜ ë°œìƒ.

- **í•´ê²° ê³¼ì •**

  - ì¶”ì²œ ë¡œì§(ìœ ì‚¬ë„ ê³„ì‚° + ì •ë ¬ + ê°œìˆ˜ ì œí•œ)ì„ DB Native Queryë¡œ ì¬êµ¬í˜„.
  - ëª¨ë“  ì—°ì‚°ì„ DBì—ì„œ ì²˜ë¦¬í•˜ê³ , ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ìµœì¢… ê²°ê³¼ë§Œ ìˆ˜ì‹ í•˜ë„ë¡ ì•„í‚¤í…ì²˜ ê°œì„ .

- **ê²°ê³¼**

  - ë¶ˆí•„ìš”í•œ ì™¸ë¶€ API í˜¸ì¶œ ì œê±° â†’ AI ì„œë²„ ì¥ì• /ì§€ì—°ì˜ ì˜í–¥ ìµœì†Œí™”.
  - ë³µì¡í•œ ì—°ì‚°ì„ DBë¡œ ìœ„ì„í•˜ì—¬ ì„œë²„ ìì›(CPUÂ·ë©”ëª¨ë¦¬) ìµœì í™”.
  - ì±…ì„ê³¼ ì—­í• ì„ ê³„ì¸µë³„ë¡œ ë¶„ë¦¬, ì•ˆì •ì„±ê³¼ ì„±ëŠ¥ ëª¨ë‘ ê°œì„ .
  - ì‹œìŠ¤í…œì˜ ë¹„íš¨ìœ¨ì„ ì•„í‚¤í…ì²˜ ê´€ì ì—ì„œ ì§„ë‹¨í•˜ê³ , ì±…ì„ê³¼ ì—­í• ì˜ ì¬ë¶„ë°°ë¥¼ í†µí•´ ì„±ëŠ¥ì„ ê°œì„ í•˜ëŠ” ì—­ëŸ‰ í™•ë³´

```java
// ReviewRepository.java
@Query(value = "SELECT * FROM review r " +
               "WHERE r.review_id != :reviewId AND ABS(r.sentiment - :sentiment) <= 1 " +
               "ORDER BY ABS(r.sentiment - :sentiment) ASC, r.created_at DESC " +
               "LIMIT 5", nativeQuery = true)
List<Review> findSimilarReviews(@Param("sentiment") int sentiment,
                                @Param("reviewId") Long reviewId);
```

---

### 3. Spring Security ì¸ì¦/ì¸ê°€ ë¬¸ì œ

#### ğŸ‘‰ FilterChain ì¬êµ¬ì„±ê³¼ ê¶Œí•œ(Role) ë§¤í•‘ ìˆ˜ì •

- **ë¬¸ì œ ìƒí™©**

  - JWT í† í°ì´ ì •ìƒ ë°œê¸‰ë˜ì—ˆìŒì—ë„ ì¼ë¶€ API ìš”ì²­ì—ì„œ `403 Forbidden` ë°œìƒ.
  - ì‚¬ìš©ì ê¶Œí•œ(Role)ì— ë”°ë¥¸ ì ‘ê·¼ ì œì–´ê°€ ê¸°ëŒ€ì™€ ë‹¤ë¥´ê²Œ ë™ì‘.

- **í•´ê²° ê³¼ì •**

  - `JwtAuthFilter`ë¥¼ `UsernamePasswordAuthenticationFilter` ì•ì— ë“±ë¡í•˜ì—¬ í† í° ê²€ì¦ ìˆœì„œ ë³´ì¥.
  - `requestMatchers()`ë¡œ ì—”ë“œí¬ì¸íŠ¸ë³„ ê¶Œí•œì„ ëª…í™•íˆ ì¬ì •ì˜.

- **ê²°ê³¼**

  - ì¸ì¦/ì¸ê°€ ë¡œì§ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ë©°, ì—­í• (Role) ê¸°ë°˜ ì ‘ê·¼ ì œì–´ í™•ë¦½.
  - Spring Security FilterChainì˜ ì‹¤í–‰ ìˆœì„œì™€ ì»¤ìŠ¤í„°ë§ˆì´ì§• ë°©ë²•ì— ëŒ€í•œ ê¹Šì€ ì´í•´ í™•ë³´.

```java
@Bean
public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
    http.csrf(csrf -> csrf.disable())
        .cors(cors -> {})
        .sessionManagement(sm -> sm.sessionCreationPolicy(SessionCreationPolicy.STATELESS))
        .authorizeHttpRequests(auth -> auth
            // ê³µìš© API
            .requestMatchers(HttpMethod.OPTIONS, "/**").permitAll()
            .requestMatchers("/api/auth/**", "/api/board/**", "/api/reposts/**", "/api/review/**", "/img/**").permitAll()
            .requestMatchers(HttpMethod.GET, "/api/notices/**").permitAll()

            // ì¸ì¦ í•„ìš” API
            .requestMatchers("/api/notices/**", "/api/members/**").authenticated()

            // ê´€ë¦¬ì ì „ìš© API
            .requestMatchers("/api/admin/**").hasRole("ADMIN")

            // ê·¸ ì™¸ ìš”ì²­
            .anyRequest().authenticated())
        .addFilterBefore(jwtAuthFilter(), UsernamePasswordAuthenticationFilter.class);

    return http.build();
}
```

<br>

<a id="screenshots"></a>
## ğŸ–¼ï¸ ê²°ê³¼ í™”ë©´

### íšŒì›ê°€ì… & ë¡œê·¸ì¸

https://github.com/user-attachments/assets/005a20c5-653e-499a-b300-615a61b077fd

<div align="center">

| ê¸°ëŠ¥          | ì„¤ëª…                                     | í™”ë©´                                                                                                      |
| ------------- | ---------------------------------------- | --------------------------------------------------------------------------------------------------------- |
| íšŒì›ê°€ì…      | ì‚¬ìš©ì ì •ë³´ ì…ë ¥ í›„ ê°€ì… ì™„ë£Œ            | <img width="250" src="https://github.com/user-attachments/assets/e845bf2a-cc45-4d2e-8256-a882ff6eed7e" /> |
| ë¡œê·¸ì¸        | ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í›„ ë¡œê·¸ì¸ ì„±ê³µ ì•Œë¦¼ | <img width="250" src="https://github.com/user-attachments/assets/559e0871-cf4a-4338-b37f-8c60fbb5d539" /> |
| íšŒì›ì •ë³´ ìˆ˜ì • | ë¹„ë°€ë²ˆí˜¸ í™•ì¸ í›„ ìˆ˜ì • ê°€ëŠ¥               | <img width="250" src="https://github.com/user-attachments/assets/5a29246e-2feb-4d95-b471-ffb0c97c6425" /> |

</div>

<br>

<details> 
<summary>ğŸ“‚ ì „ì²´ í™”ë©´ ë”ë³´ê¸°</summary>

<img width="45%" alt="íšŒì›ê°€ì…ì™„ë£Œí˜ì´ì§€" src="https://github.com/user-attachments/assets/1b426227-7996-40bf-a6b9-9b5d1453e711" />
<img width="45%" alt="ë¡œê·¸ì¸ ì™„ë£Œ ì•Œë¦¼" src="https://github.com/user-attachments/assets/0a94fc19-34cc-4db0-9f33-6d985b4dae58" />
<img width="45%" alt="íšŒì›ì •ë³´ìˆ˜ì • - í˜ì´ì§€" src="https://github.com/user-attachments/assets/6ed8d9a7-1cf7-4b81-a033-0ddcc4d72c98" />

</details>

<br>

### ë¦¬ë·° ì‘ì„± + AI ê°ì„± ë¶„ì„ ê²°ê³¼

https://github.com/user-attachments/assets/7cff6deb-b71f-4440-ab76-a543d5d1e846

<div align="center">

| ê¸°ëŠ¥      | ì„¤ëª…                                 | í™”ë©´                                                                                                      |
| --------- | ------------------------------------ | --------------------------------------------------------------------------------------------------------- |
| ë¦¬ë·° ì‘ì„± | ë¡œê·¸ì¸ í•„ìš” ì•Œë¦¼ í›„ ì‘ì„± ê°€ëŠ¥        | <img width="250" src="https://github.com/user-attachments/assets/79bd857e-56e3-4971-946f-8ac12ddfb11f" /> |
| ë¦¬ë·° ìƒì„¸ | ê°ì„± ë¶„ì„ ê²°ê³¼ì™€ í•¨ê»˜ ë¦¬ë·° ìƒì„¸ í‘œì‹œ | <img width="250" src="https://github.com/user-attachments/assets/97737fdc-c9df-4fe7-a12d-3fa9bb49c3b9" /> |
| ë¦¬ë·° ì‚­ì œ | ì‘ì„±ì ë¡œê·¸ì¸ ì‹œ ì‚­ì œ ê°€ëŠ¥           | <img width="250" src="https://github.com/user-attachments/assets/03369202-cfb4-4a9c-8998-bd4b24b01358" /> |

</div>

<br>

<details> 
<summary>ğŸ“‚ ì „ì²´ í™”ë©´ ë”ë³´ê¸°</summary>
<img width="45%" alt="ë¦¬ë·° - ë¦¬ìŠ¤íŠ¸í˜ì´ì§€" src="https://github.com/user-attachments/assets/b8d36d8c-a595-4c2d-b002-0aa259361e4a" />
<img width="45%" alt="ë¦¬ë·° - ì‘ì„±í˜ì´ì§€" src="https://github.com/user-attachments/assets/79bd857e-56e3-4971-946f-8ac12ddfb11f" />
<img width="45%" alt="ë¦¬ë·° - ì‘ì„±(ë¡œê·¸ì¸í•„ìš”ì•Œë¦¼)" src="https://github.com/user-attachments/assets/562bea68-eb57-43af-bf40-9692d75e172d" />
<img width="45%" alt="ë¦¬ë·° - ë“±ë¡ ì™„ë£Œ ìƒì„¸ í˜ì´ì§€ ( ë¡œê·¸ì¸ ì‹œ ì‚­ì œ ë²„íŠ¼ ë…¸ì¶œ )" src="https://github.com/user-attachments/assets/c481cfc1-8d0d-435d-802e-f45841dea07a" />
<img width="45%" alt="ë¦¬ë·° - ì‚­ì œ í™•ì¸ ì•Œë¦¼ì°½" src="https://github.com/user-attachments/assets/daf02093-1cfe-450a-abff-9f231a9a1982" />
</details>

<br>

### Q&A ê²Œì‹œíŒ & ê´€ë¦¬ì ë‹µë³€

https://github.com/user-attachments/assets/ca8a06f3-3e3c-4c18-b290-5cb2f1c1267c

https://github.com/user-attachments/assets/00a4aa2b-4adb-484c-bc8a-195c9c102d4d

<div align="center">

| ê¸°ëŠ¥        | ì„¤ëª…                                                                   | í™”ë©´                                                                                                      |
| ----------- | ---------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------- |
| ë¬¸ì˜ ì‘ì„±   | íšŒì›/ë¹„íšŒì› ëª¨ë‘ ì‘ì„± ê°€ëŠ¥ (ë¹„ê³µê°œê¸€ ì§€ì›)                             | <img width="250" src="https://github.com/user-attachments/assets/b46cede5-5fe0-43cf-b2ec-90385a9c77da" /> |
| ë¬¸ì˜ ìƒì„¸   | íšŒì›ì€ ë³¸ì¸ ê¸€ë§Œ, ë¹„ê³µê°œê¸€ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í•„ìš”, ê´€ë¦¬ìëŠ” ì „ì²´ ì—´ëŒ ê°€ëŠ¥ | <img width="250" src="https://github.com/user-attachments/assets/6b8a928b-fc4e-49c7-97ac-9dbdaf169ce2" /> |
| ê´€ë¦¬ì ë‹µë³€ | ê´€ë¦¬ì ê³„ì •ìœ¼ë¡œ ë‹µë³€ ë“±ë¡/ìˆ˜ì •                                         | <img width="250" src="https://github.com/user-attachments/assets/fff50eeb-c41f-4cc2-bda0-cda91ed8f284" /> |

</div>

<br>

<details> 
<summary>ğŸ“‚ ì „ì²´ í™”ë©´ ë”ë³´ê¸°</summary>
<img width="45%" alt="Q A - ë¦¬ìŠ¤íŠ¸" src="https://github.com/user-attachments/assets/8d930b1d-d466-4ce3-9b3c-1b08c69dabb6" />
<img width="45%" alt="Q A - ë¬¸ì˜ ì‘ì„±(íšŒì›)" src="https://github.com/user-attachments/assets/054193a8-6b4c-4cae-90a4-dfa2abd8e582" />
<img width="45%" alt="Q A - (íšŒì›)ë‚´ë¬¸ì˜ë‚´ì—­ í™•ì¸" src="https://github.com/user-attachments/assets/bd916321-aa72-4c86-a7e6-587b23888bae" />
<img width="45%" alt="Q A - ë¹„ê³µê°œ ê¸€ ë¹„ë°€ë²ˆí˜¸ í™•ì¸" src="https://github.com/user-attachments/assets/b577b90f-a807-4619-80e3-59dcb824d082" />
<img width="45%" alt="Q A - ë¬¸ì˜ ìƒì„¸ ì¡°íšŒ" src="https://github.com/user-attachments/assets/6b8a928b-fc4e-49c7-97ac-9dbdaf169ce2" />
<img width="45%" alt="Q A - ë¬¸ì˜ ìƒì„¸ ì¡°íšŒ (ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜)" src="https://github.com/user-attachments/assets/2bc04911-050e-4b3d-ac2c-5ec47f45c8b6" />
<img width="45%" alt="Q A - ìˆ˜ì • ë¹„ë°€ë²ˆí˜¸ í™•ì¸" src="https://github.com/user-attachments/assets/3c887c84-48c9-4c36-9710-f042e4c56ae7" />
<img width="45%" alt="Q A - ìˆ˜ì • í˜ì´ì§€" src="https://github.com/user-attachments/assets/e3e74a60-8aba-49e3-bde6-4f7901870928" />
<br>
<img width="45%" alt="Q A - (ê´€ë¦¬ì)ë¬¸ì˜ ë‹µë³€ ë…¸ì¶œ" src="https://github.com/user-attachments/assets/fad1f9cb-607d-4925-a1c6-390a33747ac4" />
<img width="45%" alt="Q A - (ê´€ë¦¬ì)ë¬¸ì˜ ë‹µë³€ ë“±ë¡ ì™„ë£Œ ì•Œë¦¼" src="https://github.com/user-attachments/assets/e6ccf120-16b6-42aa-afd9-dd0e054f7dfc" />
<img width="45%" alt="Q A - (ê´€ë¦¬ì)ë¬¸ì˜ ë‹µë³€ ìˆ˜ì • ì™„ë£Œ í˜ì´ì§€" src="https://github.com/user-attachments/assets/2610a0e6-de50-445d-be59-cfc8878ee142" />
</details>

<br>

### ê³µì§€ì‚¬í•­ (ê´€ë¦¬ì ì „ìš© CRUD)

https://github.com/user-attachments/assets/90a01640-8e21-4369-bad4-d7e3fcfceb64

<div align="center">

| ê¸°ëŠ¥           | ì„¤ëª…                                  | í™”ë©´                                                                                                      |
| -------------- | ------------------------------------- | --------------------------------------------------------------------------------------------------------- |
| ê³µì§€ ë“±ë¡      | ê´€ë¦¬ìë§Œ ê³µì§€ ì‘ì„± ê°€ëŠ¥               | <img width="250" src="https://github.com/user-attachments/assets/6c0e647e-4b0d-4756-8b44-05ee50db9c09" /> |
| ê³µì§€ ìƒì„¸      | ì‚¬ìš©ì ëˆ„êµ¬ë‚˜ ì—´ëŒ ê°€ëŠ¥               | <img width="250" src="https://github.com/user-attachments/assets/fec73c6a-d364-4fa6-b0c5-671c59987530" /> |
| ê³µì§€ ìˆ˜ì •/ì‚­ì œ | ê´€ë¦¬ì ê¶Œí•œ í™•ì¸ í›„ ìˆ˜ì • ë° ì‚­ì œ ê°€ëŠ¥ | <img width="250" src="https://github.com/user-attachments/assets/66877d4a-49b7-4d4a-b875-ff5e20afe816" /> |

</div>

<br>

<details> 
<summary>ğŸ“‚ ì „ì²´ í™”ë©´ ë”ë³´ê¸°</summary>
<img width="45%" alt="ìº˜ë¦°ë” - ë“±ë¡ í˜ì´ì§€" src="https://github.com/user-attachments/assets/5c91d1fc-f31a-4fc9-b69f-ee2062612a91" />
<img width="45%" alt="ìº˜ë¦°ë” - ë¦¬ìŠ¤íŠ¸" src="https://github.com/user-attachments/assets/eef3cd5d-ef63-43e5-97db-09a4e31b49e1" />
<img width="45%" alt="ìº˜ë¦°ë” - ìƒì„¸í˜ì´ì§€(í•˜ë‹¨)" src="https://github.com/user-attachments/assets/e5643603-e303-410e-941a-5a10ad9c83d1" />
<img width="45%" alt="ìº˜ë¦°ë” - ìƒì„¸í˜ì´ì§€(í•˜ë‹¨, ê´€ë¦¬ì ì™¸)" src="https://github.com/user-attachments/assets/f7954439-d9f0-4536-afd2-e60e8526c1b3">
</details>
  
<br>

## ğŸ“ íšŒê³ 

### ğŸ“š í”„ë¡œì íŠ¸ ì„±ê³¼

- JWT ì¸ì¦/ì¸ê°€ì™€ Spring Security FilterChain ë™ì‘ ì›ë¦¬ë¥¼ ì´í•´í•˜ê³  ì ìš©.

  - `JwtAuthFilter`ë¥¼ ì§ì ‘ êµ¬í˜„í•˜ì—¬ í† í° ê²€ì¦ â†’ SecurityContext ë°˜ì˜ â†’ ê¶Œí•œ(Role) ê¸°ë°˜ ì ‘ê·¼ ì œì–´ íë¦„ì„ ì´í•´ ë° ì ìš©.
  - ë³´ì•ˆ ì•„í‚¤í…ì²˜ì˜ í•µì‹¬ ì›ë¦¬ë¥¼ ì‹¤ìŠµí•˜ë©° Spring Security êµ¬ì¡°ì— ëŒ€í•œ ì´í•´ë„ ê°•í™”.

- ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì—°ë™ì„ í†µí•´ ë…ë¦½ ë°°í¬ ê°€ëŠ¥í•œ AI ê¸°ëŠ¥ êµ¬í˜„ ê²½í—˜ í™•ë³´.

  - Flask ê¸°ë°˜ AI ê°ì„± ë¶„ì„ ì„œë¹„ìŠ¤ë¥¼ ë³„ë„ ì„œë²„ë¡œ êµ¬ì¶• í›„ `Spring Boot`ì™€ `REST API`ë¡œ ì—°ë™.
  - ë…ë¦½ ë°°í¬ ë° í™•ì¥ì´ ê°€ëŠ¥í•œ êµ¬ì¡°ë¥¼ ê²½í—˜í•˜ë©° MSA ì•„í‚¤í…ì²˜ì˜ ì¥ì  ì²´ë“.

- DB ì„¤ê³„ ë° ì •ê·œí™” ê²½í—˜
  - ì‚¬ìš©ì, ê²Œì‹œíŒ, ë¦¬ë·°, ê³µì§€ ë“± ì‹¤ì œ ì„œë¹„ìŠ¤ ìš”êµ¬ì‚¬í•­ì„ ë°˜ì˜í•œ í…Œì´ë¸”ê³¼ ê´€ê³„ë¥¼ ì„¤ê³„.
  - ì™¸ë˜í‚¤ ì œì•½ì¡°ê±´ê³¼ ENUM íƒ€ì…ì„ í™œìš©í•´ ë°ì´í„° ë¬´ê²°ì„±ê³¼ ì¼ê´€ì„±ì„ ë³´ì¥í•˜ë©° ERD ê¸°ë°˜ ëª¨ë¸ë§ ëŠ¥ë ¥ ê°•í™”.

- ERD â†’ JPA ë§¤í•‘ ë° N+1 ë¬¸ì œ í•´ê²°

  - ì—°ê´€ê´€ê³„ ë§¤í•‘, ì¦‰ì‹œ/ì§€ì—° ë¡œë”© ì „ëµ, fetch join, EntityGraphë¥¼ ì ìš©í•˜ë©° ORM ìµœì í™” ê²½í—˜.
  - N+1 ë¬¸ì œë¥¼ ì§ì ‘ ë§ˆì£¼í•˜ê³  í•´ê²°í•˜ë©° `ë°ì´í„° ì ‘ê·¼ ìµœì í™”` ì—­ëŸ‰ ê°•í™”.

- Postmanì„ í™œìš©í•œ `API ë¬¸ì„œí™”`ì™€ ê³µìœ ê¹Œì§€ í˜‘ì—… ì¹œí™”ì  ë¬¸ì„œ ì‘ì„±ë²• í•™ìŠµ.
  - Postman ì»¬ë ‰ì…˜ ê³µìœ  ë° ìë™ ë¬¸ì„œí™” ê¸°ëŠ¥ì„ í™œìš©í•´ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ê°€ëŠ¥í•œ API ë ˆí¼ëŸ°ìŠ¤ êµ¬ì¶•.

### ê°œì„ í•  ì 

- íŒŒì¼ ì—…ë¡œë“œ ë¡œì»¬ ì €ì¥ â†’ AWS S3 ë“± í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ ì „í™˜ í•„ìš”.

- AI ëª¨ë¸ì€ ê³µê°œ Hugging Face ëª¨ë¸ ì‚¬ìš© â†’ ì„œë¹„ìŠ¤ íŠ¹í™” íŒŒì¸íŠœë‹ ê³ ë ¤.

- í…ŒìŠ¤íŠ¸ ì½”ë“œ ì»¤ë²„ë¦¬ì§€ê°€ ë‚®ìŒ â†’ JUnit + MockMvc ê¸°ë°˜ í™•ëŒ€ ì˜ˆì •.

- ë°°í¬ ìë™í™”(CI/CD) ë° Docker/K8s ê¸°ë°˜ ìš´ì˜ í™˜ê²½ ê°œì„  í•„ìš”.
